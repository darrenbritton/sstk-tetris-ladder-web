(this["webpackJsonpsstk-tetris-ladder-web"]=this["webpackJsonpsstk-tetris-ladder-web"]||[]).push([[0],{152:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),c=n(22),o=n(40),l=n(15),s=n(91),d=n(94),p=n(38),j=(n(139),{serverUrl:"localhost"===location.hostname||"127.0.0.1"===location.hostname?"localhost:8080":"sstk-tetris-ladder.herokuapp.com"}),u="persist-player",h="persist-leaderboard",g="persist-challenges",b="persist-games",O="persist-playing",f="notify-generic",y="notify-clear",x="toggle-player-drawer",m="toggle-play-dialog",v="display-game-prompt",w={generic:function(e){return function(t){t({type:f,payload:e})}},clear:function(e){return function(t){t({type:y,payload:e})}}},C={challenge:function(e){return function(t){G.write({type:"player.challenge",payload:e}),t({type:"player-challenge",payload:e})}},acceptChallenge:function(e){return function(t){G.write({type:"challenge.accept",payload:e}),t({type:"accept-challenge",payload:e})}},rejectChallenge:function(e){return function(t){G.write({type:"challenge.reject",payload:e}),t({type:"reject-challenge",payload:e})}}},P={togglePlayerDrawer:function(){return function(e){e({type:x,payload:{}})}},togglePlayDialog:function(){return function(e){e({type:m,payload:{}})}},gamePrompt:function(e){return function(t){t({type:v,payload:e})}}},k={initiate:function(e){return function(t){G.write({type:"game.initiate",payload:e}),t({type:"game-initiate",payload:e})}},reject:function(e){return function(t){G.write({type:"game.reject",payload:e}),t({type:"game-reject",payload:e})}},accept:function(e){return function(t){G.write({type:"game.accept",payload:e}),t({type:"game-accept",payload:e})}},win:function(e){return function(t){G.write({type:"game.win",payload:e}),t({type:"game-win",payload:e})}},lose:function(e){return function(t){G.write({type:"game.lose",payload:e}),t({type:"game-lose",payload:e})}},contest:function(e){return function(t){G.write({type:"game.contest",payload:e}),t({type:"game-contest",payload:e})}},confirm:function(e){return function(t){G.write({type:"game.confirm",payload:e}),t({type:"game-confirm",payload:e})}}},D={persist:{player:function(e){return function(t){t({type:u,payload:e})}},leaderboard:function(e){return function(t){t({type:h,payload:e})}},challenges:function(e){return function(t){t({type:g,payload:e})}},games:function(e){return function(t){t({type:b,payload:e})}},playing:function(e){return function(t){t({type:O,payload:e})}}},notify:w,display:P,player:C,game:k},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return t.payload;default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.payload;default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{received:[],sent:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload;default:return e}},I=n(110),A=n(31),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{generic:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(A.a)(Object(A.a)({},e),{},{generic:[].concat(Object(I.a)(e.generic),[t.payload])});case y:return Object(A.a)(Object(A.a)({},e),{},{generic:[]});default:return e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playerDrawer:!1,breakDrawer:!1,playDialog:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(A.a)(Object(A.a)({},e),{},{playerDrawer:!e.playerDrawer});case m:return Object(A.a)(Object(A.a)({},e),{},{playDialog:!e.playDialog});case v:return Object(A.a)(Object(A.a)({},e),{},{playDialog:!0});default:return e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pending:[],recent:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{waitingForPlayer:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return 0===Object.keys(t.payload).length?{waitingForPlayer:!0}:t.payload;case v:return t.payload;default:return e}},z=function(e){return Object(l.combineReducers)({router:Object(o.b)(e),leaderboard:_,challenges:B,games:q,player:S,notifications:F,display:R,playing:E})},L=Object(p.a)(),T=[d.a,Object(s.a)(L)],M=l.compose.apply(void 0,[l.applyMiddleware.apply(void 0,T)].concat([])),W=Object(l.createStore)(z(L),{},M),G=new window.Primus("//".concat(j.serverUrl));G.on("data",(function(e){if(e.action){var t=e.action.split(".");D[t[0]][t[1]]&&W.dispatch(D[t[0]][t[1]].call(this,e.payload||{}))}}));var U,H=W,Q=n(17),Y=n(18),J=n(20),K=n(19),N=n(64),V=n(27),X=n(14),Z=n(21),$=n(13),ee=n(206),te=n(207),ne=n(203),ae=n(202),re=n(81),ie=n(227),ce=n(208),oe=n(111),le=n(210),se=n(103),de=n.n(se),pe=n(225),je=n(230),ue=n(229),he=n(198),ge=n(2),be=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(Q.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).createSortHandler=function(t){return function(n){e.props.onRequestSort(n,t)}},e}return Object(Y.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.order,a=t.orderBy;return Object(ge.jsx)(he.a,{children:Object(ge.jsx)(ae.a,{children:this.props.columns.map((function(t){return Object(ge.jsxs)(ne.a,{numeric:t.numeric,padding:"dense",sortDirection:a===t.id&&n,children:[t.sortable&&Object(ge.jsx)(ue.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300,children:Object(ge.jsx)(je.a,{active:a===t.id,direction:n,onClick:e.createSortHandler(t.id),children:t.label})}),t.sortable?"":t.label]},t.id)}),this)})})}}]),n}(r.a.Component),Oe=Object($.default)(Z.Flex)(U||(U=Object(X.a)(["\n  width: 100%;\n  overflow-x: auto;\n  table {\n    display: table-caption !important;\n    th {\n      padding-right: 0.8vw !important;\n    }\n  }\n"]))),fe=[{id:"avatar",numeric:!1,sortable:!1,label:"Avatar"},{id:"username",numeric:!1,sortable:!0,label:"Username"},{id:"rank",numeric:!0,sortable:!0,label:"Rank (Elo)"},{id:"gamesPlayed",numeric:!0,sortable:!0,label:"Games Played"}];function ye(e,t){return"desc"===e?function(e,n){return n[t]<e[t]?-1:n[t]===e[t]?0:1}:function(e,n){return e[t]<n[t]?-1:e[t]===n[t]?0:1}}var xe,me,ve,we,Ce,Pe,ke,De,Se,_e,Be,Ie,Ae,Fe,Re,qe,Ee,ze,Le,Te,Me=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(e){var a;return Object(Q.a)(this,n),(a=t.call(this,e)).handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.challenge=function(e){a.handleClose(),a.props.challenge({opponent:e})},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.state={order:"desc",orderBy:"rank",page:0,rowsPerPage:5,anchorEl:null},a}return Object(Y.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.order,a=t.orderBy,r=t.rowsPerPage,i=t.page;return Object(ge.jsx)(Oe,{flexDirection:"column",children:Object(ge.jsx)(Z.Box,{m:"auto",mt:"15vh",children:Object(ge.jsxs)(re.a,{children:[Object(ge.jsxs)(ee.a,{children:[Object(ge.jsx)(be,{columns:fe,order:n,orderBy:a,onRequestSort:this.handleRequestSort,rowCount:this.props.leaderboard.length}),Object(ge.jsx)(te.a,{children:this.props.leaderboard.sort(ye(n,a)).slice(i*r,i*r+r).map((function(t){return Object(ge.jsxs)(ae.a,{children:[Object(ge.jsx)(ne.a,{padding:"dense",children:Object(ge.jsx)(ie.a,{src:t.photo})}),Object(ge.jsx)(ne.a,{padding:"dense",children:t.username}),Object(ge.jsx)(ne.a,{numeric:!0,padding:"dense",children:t.rank}),Object(ge.jsx)(ne.a,{numeric:!0,padding:"dense",children:t.gamesPlayed}),Object(ge.jsxs)(ne.a,{padding:"none",children:[Object(ge.jsx)(ce.a,{"aria-label":"More","aria-owns":e.state.anchorEl?"long-menu":null,"aria-haspopup":"true","data-id":t._id,onClick:e.handleClick,children:Object(ge.jsx)(de.a,{})}),Object(ge.jsxs)(oe.a,{id:"long-menu",anchorEl:e.state.anchorEl,open:Boolean(e.state.anchorEl),onClose:e.handleClose,children:[Object(ge.jsx)(le.a,{onClick:function(){return e.challenge(e.state.anchorEl.dataset.id)},children:"Challenge"}),Object(ge.jsx)(le.a,{onClick:e.handleClose,children:"View Stats"})]})]})]},t._id)}))})]}),Object(ge.jsx)(pe.a,{component:Z.Box,count:this.props.leaderboard.length,rowsPerPage:r,page:i,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})]})})})}}]),n}(a.Component),We=Object(c.c)((function(e){return{leaderboard:e.leaderboard}}),(function(e){return Object(l.bindActionCreators)({challenge:C.challenge},e)}))(Me),Ge=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(Y.a)(n,[{key:"render",value:function(){return Object(ge.jsx)(We,{})}}]),n}(a.Component),Ue=n(212),He=$.default.div(xe||(xe=Object(X.a)(['\n  position: absolute;\n  height: 100%;\n  background: url("/background.jpg");\n  width: 100%;\n  overflow: hidden;\n']))),Qe=$.default.img(me||(me=Object(X.a)(["\n  position: relative;\n  margin-left: 11px;\n  width: 18px;\n  height: 18px;\n"]))),Ye=Object($.default)(Z.Box)(ve||(ve=Object(X.a)(["\n    transform: rotate(-15deg);\n"]))),Je=$.default.p(we||(we=Object(X.a)(["\n    font-family: 'Montserrat';\n    height: 3.5em;\n    font-size: 3em;\n    text-align: center;\n    color: #fff;\n    -webkit-text-stroke: 3px black;\n"]))),Ke=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(Y.a)(n,[{key:"render",value:function(){return Object(ge.jsx)(He,{children:Object(ge.jsxs)(Z.Flex,{flexDirection:"column",children:[Object(ge.jsx)(Ye,{m:"auto",mt:"25vh",children:Object(ge.jsxs)(Je,{children:["Shutterstock",Object(ge.jsx)("br",{}),"Tetris"]})}),Object(ge.jsx)(Z.Box,{m:"auto",mt:"3vh",children:Object(ge.jsxs)(Ue.a,{href:"/login",variant:"contained",color:"primary",children:["Login With"," ",Object(ge.jsx)(Qe,{src:"/googleLogo.svg"})]})})]})})}}]),n}(a.Component),Ne=n(209),Ve=n(155),Xe=n(213),Ze=n(214),$e=n(228),et=n(56),tt=Object($.default)(Z.Flex)(Ce||(Ce=Object(X.a)(["\n    width: 100%;\n    overflow-x: auto;\n"]))),nt=Object($.default)(re.a)(Pe||(Pe=Object(X.a)(["\n  min-height: 40px;\n  min-width: 350px;\n"]))),at=Object($.default)($e.a)(ke||(ke=Object(X.a)(["\n  margin-right: 20px;\n"]))),rt=Object($.default)(et.a)(De||(De=Object(X.a)(["\n  color: #fff  !important;\n"]))),it=Object($.default)(et.a)(Se||(Se=Object(X.a)(["\n  text-align: center;\n  margin-top: 30px !important;\n  margin-bottom: 30px !important;\n"]))),ct=Object($.default)(Ue.a)(_e||(_e=Object(X.a)(["\n  margin-right: 10px !important;\n"]))),ot=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(Q.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).acceptChallenge=function(t){e.props.acceptChallenge({id:t})},e.rejectChallenge=function(t){e.props.rejectChallenge({id:t})},e}return Object(Y.a)(n,[{key:"render",value:function(){var e=this;return Object(ge.jsxs)(tt,{flexDirection:"column",children:[Object(ge.jsxs)(Z.Box,{m:"auto",mt:"15vh",children:[Object(ge.jsx)(rt,{variant:"display1",gutterBottom:!0,children:"Received"}),Object(ge.jsx)(nt,{children:Object(ge.jsxs)(Ne.a,{children:[this.props.challenges.received.map((function(t){return Object(ge.jsxs)(Ve.a,{children:[Object(ge.jsx)(ie.a,{src:t.challenger.photo}),Object(ge.jsx)(Xe.a,{primary:t.challenger.username}),Object(ge.jsxs)(Ze.a,{children:[Object(ge.jsx)(ct,{size:"small",variant:"contained",color:"primary",onClick:function(){return e.acceptChallenge(t._id)},children:"Accept"}),Object(ge.jsx)(ct,{size:"small",variant:"contained",color:"secondary",onClick:function(){return e.rejectChallenge(t._id)},children:"Reject"})]})]},t._id)})),0===this.props.challenges.received.length&&Object(ge.jsx)(it,{variant:"body2",children:"You don't currently have any open challenges"})]})})]}),Object(ge.jsxs)(Z.Box,{m:"auto",mt:"5vh",children:[Object(ge.jsx)(rt,{variant:"display1",gutterBottom:!0,children:"Sent"}),Object(ge.jsx)(nt,{children:Object(ge.jsxs)(Ne.a,{children:[this.props.challenges.sent.map((function(e){return Object(ge.jsxs)(Ve.a,{children:[Object(ge.jsx)(ie.a,{src:e.opponent.photo}),Object(ge.jsx)(Xe.a,{primary:e.opponent.username}),Object(ge.jsx)(Ze.a,{children:Object(ge.jsx)(at,{label:"Pending Response"})})]},e._id)})),0===this.props.challenges.sent.length&&Object(ge.jsx)(it,{variant:"body2",children:"You haven't sent any challenges that are still pending"})]})})]})]})}}]),n}(a.Component),lt=Object(c.c)((function(e){return{challenges:e.challenges}}),(function(e){return Object(l.bindActionCreators)({challenge:C.challenge,acceptChallenge:C.acceptChallenge,rejectChallenge:C.rejectChallenge},e)}))(ot),st=n(79),dt=n.n(st),pt=Object($.default)(Z.Flex)(Be||(Be=Object(X.a)(["\n  width: 100%;\n  overflow-x: auto;\n"]))),jt=Object($.default)($e.a)(Ie||(Ie=Object(X.a)(["\n  margin-right: 20px;\n"]))),ut=Object($.default)(ie.a)(Ae||(Ae=Object(X.a)(["\n   display: inline-block !important;\n"]))),ht=Object($.default)(et.a)(Fe||(Fe=Object(X.a)(["\n  color: #fff  !important;\n"]))),gt=Object($.default)(Ue.a)(Re||(Re=Object(X.a)(["\n  margin-right: 10px !important;\n"]))),bt=$.default.p(qe||(qe=Object(X.a)(["\n  display: inline-block;\n  vertical-align: bottom;\n  @media (min-width: 675px) {\n    margin-left: 10px;\n  }\n"]))),Ot=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(Q.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).findPlayer=function(t){return e.props.leaderboard.find((function(e){return t===e._id}))},e.initiateGame=function(t){e.props.togglePlayDialog(),e.props.initiate({id:t})},e}return Object(Y.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.player,a=t.games;return Object(ge.jsxs)(pt,{flexDirection:"column",children:[Object(ge.jsxs)(Z.Box,{m:"auto",mt:"15vh",children:[Object(ge.jsx)(ht,{variant:"display1",gutterBottom:!0,children:"Pending"}),Object(ge.jsx)(re.a,{children:Object(ge.jsxs)(ee.a,{children:[Object(ge.jsx)(he.a,{children:Object(ge.jsxs)(ae.a,{children:[Object(ge.jsx)(ne.a,{padding:"dense",children:"Challenger"}),Object(ge.jsx)(ne.a,{padding:"dense",children:"Opponent"}),Object(ge.jsx)(ne.a,{padding:"dense",children:"Accepted"}),Object(ge.jsx)(ne.a,{padding:"dense",children:"State"})]})}),Object(ge.jsx)(te.a,{children:a.pending.map((function(t){var a=e.findPlayer(t.challenger),r=e.findPlayer(t.opponent);return Object(ge.jsxs)(ae.a,{children:[Object(ge.jsxs)(ne.a,{padding:"dense",children:[Object(ge.jsx)(ut,{src:a.photo}),Object(ge.jsx)(bt,{children:a.username})]}),Object(ge.jsxs)(ne.a,{padding:"dense",children:[Object(ge.jsx)(ut,{src:r.photo}),Object(ge.jsx)(bt,{children:r.username})]}),Object(ge.jsx)(ne.a,{padding:"dense",children:Object(ge.jsx)(dt.a,{date:t.created_at})}),Object(ge.jsx)(ne.a,{padding:"dense",children:a._id!==n.id&&r._id!==n.id||t.inProgress?a._id!==n.id&&r._id!==n.id||!t.inProgress?t.inProgress?Object(ge.jsx)(jt,{label:"In Progress"}):Object(ge.jsx)(jt,{label:"Waiting For Players..."}):Object(ge.jsx)(gt,{size:"small",variant:"contained",color:"primary",onClick:function(){return e.props.togglePlayDialog()},children:"Continue"}):Object(ge.jsx)(gt,{size:"small",variant:"contained",color:"primary",onClick:function(){return e.initiateGame(t._id)},children:"Play"})})]},t._id)}))})]})})]}),Object(ge.jsxs)(Z.Box,{m:"auto",mt:"15vh",children:[Object(ge.jsx)(ht,{variant:"display1",gutterBottom:!0,children:"Recent"}),Object(ge.jsx)(re.a,{children:Object(ge.jsxs)(ee.a,{children:[Object(ge.jsx)(he.a,{children:Object(ge.jsxs)(ae.a,{children:[Object(ge.jsx)(ne.a,{padding:"dense",children:"Winner"}),Object(ge.jsx)(ne.a,{padding:"dense",children:"Loser"}),Object(ge.jsx)(ne.a,{padding:"dense",children:"Time"}),Object(ge.jsx)(ne.a,{padding:"dense",children:"Ranking Delta"})]})}),Object(ge.jsx)(te.a,{children:a.recent.map((function(t){var n=e.findPlayer(t.winner),a=e.findPlayer(t.winner===t.challenger?t.opponent:t.challenger);return Object(ge.jsxs)(ae.a,{children:[Object(ge.jsxs)(ne.a,{padding:"dense",children:[Object(ge.jsx)(ut,{src:n.photo}),Object(ge.jsx)(bt,{children:n.username})]}),Object(ge.jsxs)(ne.a,{padding:"dense",children:[Object(ge.jsx)(ut,{src:a.photo}),Object(ge.jsx)(bt,{children:a.username})]}),Object(ge.jsx)(ne.a,{padding:"dense",children:Object(ge.jsx)(dt.a,{date:t.created_at})}),Object(ge.jsx)(ne.a,{padding:"dense",children:Math.abs(n.rank-a.rank)})]},t._id)}))})]})})]})]})}}]),n}(a.Component),ft=Object(c.c)((function(e){return{games:e.games,leaderboard:e.leaderboard,player:e.player}}),(function(e){return Object(l.bindActionCreators)({challenge:C.challenge,togglePlayDialog:P.togglePlayDialog,initiate:k.initiate},e)}))(Ot),yt=n(216),xt=n(211),mt=n(107),vt=n.n(mt),wt=n(104),Ct=n.n(wt),Pt=n(105),kt=n.n(Pt),Dt=n(106),St=n.n(Dt),_t=n(108),Bt=n.n(_t),It=n(217),At=n(218),Ft=n(215),Rt=$.default.a(Ee||(Ee=Object(X.a)(["\n    font-family: 'Montserrat';\n    font-size: 2em;\n    color: #fff;\n    text-decoration: none;\n"]))),qt=$.default.div(ze||(ze=Object(X.a)(["\n  z-index: 100;\n  position: fixed;\n  bottom: 5vh;\n  right: 5vh;\n"]))),Et=[{label:"Leaderboard",icon:Object(ge.jsx)(Ct.a,{})},{label:"Challenges",icon:Object(ge.jsx)(kt.a,{})},{label:"Games",icon:Object(ge.jsx)(St.a,{})}],zt=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;return Object(Q.a)(this,n),(e=t.call(this)).toggleDrawer=function(t){return function(){e.setState({drawer:t})}},e.pageListFragments=function(){return Et.map((function(t){return Object(ge.jsxs)(Ve.a,{button:!0,onClick:function(){return e.props.changePage(t.label.toLowerCase())},children:[Object(ge.jsx)(Ft.a,{children:t.icon}),Object(ge.jsx)(Xe.a,{primary:t.label})]},t.label)}))},e.state={drawer:!1},e}return Object(Y.a)(n,[{key:"render",value:function(){var e=this;return Object(ge.jsxs)(Z.Flex,{children:[Object(ge.jsx)(yt.a,{position:"static",children:Object(ge.jsx)(xt.a,{children:Object(ge.jsx)(Z.Flex,{justifyContent:"space-between",children:Object(ge.jsx)(Z.Box,{children:Object(ge.jsx)(Rt,{href:"/",children:"SSTK Tetris"})})})})}),Object(ge.jsxs)(qt,{children:[Object(ge.jsx)(Ue.a,{variant:"fab",color:"primary","aria-label":"More","aria-owns":this.state.anchorEl?"long-menu":null,"aria-haspopup":"true",onClick:this.toggleDrawer(!0),children:Object(ge.jsx)(vt.a,{})}),Object(ge.jsx)(It.a,{anchor:"bottom",open:this.state.drawer,onClose:this.toggleDrawer(!1),children:Object(ge.jsxs)("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer(!1),onKeyDown:this.toggleDrawer(!1),children:[Object(ge.jsx)(Ne.a,{children:this.pageListFragments()}),Object(ge.jsx)(At.a,{}),Object(ge.jsx)(Ne.a,{children:Object(ge.jsxs)(Ve.a,{button:!0,onClick:function(){return e.props.changePage("logout")},children:[Object(ge.jsx)(Ft.a,{children:Object(ge.jsx)(Bt.a,{})}),Object(ge.jsx)(Xe.a,{primary:"Logout"})]})})]})})]})]})}}]),n}(a.Component),Lt=Object(c.c)((function(e){return{player:e.player,display:e.display}}),(function(e){return Object(l.bindActionCreators)({changePage:function(e){return Object(V.d)("/".concat(e))},togglePlayerDrawer:P.togglePlayerDrawer},e)}))(zt),Tt=n(6),Mt=n(226),Wt=n(109),Gt=n.n(Wt),Ut=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;return Object(Q.a)(this,n),(e=t.call(this)).processQueue=function(){e.state.queue.length>0&&e.setState({messageInfo:e.state.queue[0],open:!0,queue:e.state.queue.length>1?e.state.queue.slice(1):[]})},e.handleClose=function(t,n){"clickaway"!==n&&e.setState({open:!1})},e.handleAction=function(t){switch(t){case"challenge.view":return e.props.changePage("challenges");case"game.view":return e.props.changePage("games");case"leaderboard.view":return e.props.changePage("leaderboard");default:return!0}},e.handleExited=function(){e.processQueue()},e.state={open:!1,messageInfo:{},queue:[]},e}return Object(Y.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.notifications.length>0&&this.setState({queue:this.state.queue.concat(e.notifications)},(function(){t.props.notificationClear(),t.state.open?t.setState({open:!1}):t.processQueue()}))}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.messageInfo,a=n.text,r=n.action,i=n.actionText;return Object(ge.jsx)("div",{children:Object(ge.jsx)(Mt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:3e3,onClose:this.handleClose,onExited:this.handleExited,ContentProps:{"aria-describedby":"message-id"},message:Object(ge.jsx)("span",{id:"message-id",children:a}),action:[Object(ge.jsx)(Ue.a,{color:"secondary",size:"small",onClick:function(){return e.handleAction(r)},children:i||""},"goTo"),Object(ge.jsx)(ce.a,{"aria-label":"Close",color:"inherit",className:t.close,onClick:this.handleClose,children:Object(ge.jsx)(Gt.a,{})},"close")]})})}}]),n}(r.a.Component),Ht=Object(c.c)((function(e){return{notifications:e.notifications.generic}}),(function(e){return Object(l.bindActionCreators)({notificationClear:w.clear,changePage:function(e){return Object(V.d)("/".concat(e))}},e)}))(Object(Tt.a)((function(e){return{close:{width:4*e.spacing.unit,height:4*e.spacing.unit}}}))(Ut)),Qt=n(221),Yt=n(224),Jt=n(220),Kt=n(223),Nt=n(222),Vt=n(219),Xt=n(156),Zt=Object($.default)(Vt.a)(Le||(Le=Object(X.a)(["\n  margin: auto !important;\n  margin-top: 5vh !important;\n"]))),$t=Object($.default)(Jt.a)(Te||(Te=Object(X.a)(["\n    display: flex !important;\n    flex-direction: column !important;\n    justify-content: center !important;\n    align-items: center !important;\n"])));function en(e){return Object(ge.jsx)(Xt.a,Object(A.a)({direction:"up"},e))}var tn=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(Q.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).findPlayer=function(t){return e.props.leaderboard.find((function(e){return t===e._id}))},e.accept=function(t){e.props.accept({id:t})},e.reject=function(t){e.props.reject({id:t}),e.props.togglePlayDialog()},e.won=function(t){e.props.won({id:t})},e.lost=function(t){e.props.lost({id:t})},e.confirm=function(t){e.props.confirm({id:t}),e.props.togglePlayDialog()},e.contest=function(t){e.props.contest({id:t}),e.props.togglePlayDialog()},e}return Object(Y.a)(n,[{key:"render",value:function(){var e=this;return Object(ge.jsxs)(Qt.a,{open:this.props.display.playDialog,TransitionComponent:en,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[this.props.playing._id&&!this.props.playing.inProgress&&Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Nt.a,{id:"alert-dialog-slide-title",children:"".concat(this.props.playing.challenger===this.props.player.id?this.findPlayer(this.props.playing.opponent).username:this.findPlayer(this.props.playing.challenger).username," would like to start your game")}),Object(ge.jsx)(Jt.a,{children:Object(ge.jsx)(Kt.a,{id:"alert-dialog-slide-description",children:"click one of the options below to accept or reject the commencement of the game"})}),Object(ge.jsxs)(Yt.a,{children:[Object(ge.jsx)(Ue.a,{onClick:function(){return e.accept(e.props.playing._id)},color:"primary",children:"Accept"}),Object(ge.jsx)(Ue.a,{onClick:function(){return e.reject(e.props.playing._id)},color:"primary",children:"Reject"})]})]}),this.props.playing.waitingForPlayer&&Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Nt.a,{id:"alert-dialog-slide-title",children:"Waiting for opponent to accept..."}),Object(ge.jsx)($t,{children:Object(ge.jsx)(Zt,{})}),Object(ge.jsx)(Yt.a,{children:Object(ge.jsx)(Ue.a,{onClick:this.props.togglePlayDialog,color:"primary",children:"Cancel"})})]}),this.props.playing.inProgress&&!this.props.playing.winner&&Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Nt.a,{id:"alert-dialog-slide-title",children:"Game In Progress"}),Object(ge.jsx)(Jt.a,{children:Object(ge.jsx)(Kt.a,{id:"alert-dialog-slide-description",children:"Once the game is finished, click on your outcome below"})}),Object(ge.jsxs)(Yt.a,{children:[Object(ge.jsx)(Ue.a,{onClick:function(){return e.won(e.props.playing._id)},color:"primary",children:"I Won"}),Object(ge.jsx)(Ue.a,{onClick:function(){return e.lost(e.props.playing._id)},color:"primary",children:"I Lost"})]})]}),this.props.playing.inProgress&&this.props.playing.winner&&this.props.playing.waitingForConfirmationFrom===this.props.player.id&&Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Nt.a,{id:"alert-dialog-slide-title",children:"".concat(this.props.playing.challenger===this.props.player.id?this.findPlayer(this.props.playing.opponent).username:this.findPlayer(this.props.playing.challenger).username," has declared ").concat(this.props.playing.winner===this.props.player.id?"you":"themself"," the winner")}),Object(ge.jsx)(Jt.a,{children:Object(ge.jsx)(Kt.a,{id:"alert-dialog-slide-description",children:"You can either confirm or contest this decision. Contesting will nullify any ranking changes the outcome of this match would have had so only contest as a last resort!"})}),Object(ge.jsxs)(Yt.a,{children:[Object(ge.jsx)(Ue.a,{onClick:function(){return e.contest(e.props.playing._id)},color:"secondary",children:"Contest"}),Object(ge.jsx)(Ue.a,{onClick:function(){return e.confirm(e.props.playing._id)},color:"primary",children:"Confirm"})]})]}),this.props.playing.inProgress&&this.props.playing.winner&&this.props.playing.waitingForConfirmationFrom!==this.props.player.id&&Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Nt.a,{id:"alert-dialog-slide-title",children:"waiting for opponent to confirm result"}),Object(ge.jsxs)($t,{children:[Object(ge.jsx)(Kt.a,{id:"alert-dialog-slide-description",children:"If your opponent contests the result it will nullify any ranking changes the outcome of this match would have had so don't try to cheat!"}),Object(ge.jsx)(Zt,{})]})]})]})}}]),n}(r.a.Component),nn=Object(c.c)((function(e){return{display:e.display,playing:e.playing,player:e.player,leaderboard:e.leaderboard}}),(function(e){return Object(l.bindActionCreators)({togglePlayDialog:P.togglePlayDialog,accept:k.accept,reject:k.reject,won:k.win,lost:k.lose,confirm:k.confirm,contest:k.contest},e)}))(tn),an=["leaderboard","challenges","games"],rn=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(e){var a;return Object(Q.a)(this,n),(a=t.call(this,e)).state={loggedIn:!1},a}return Object(Y.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){!e.props.player.id&&e.props.location&&"/logged-out"!==e.props.location.pathname&&(e.props.loggedOut(),location.reload())}),600)}},{key:"render",value:function(){return Object(ge.jsxs)("div",{children:[this.state.loggedIn?Object(ge.jsx)("div",{children:Object(ge.jsx)(Lt,{})}):null,Object(ge.jsxs)(N.c,{children:[Object(ge.jsx)(N.a,{exact:!0,path:"/leaderboard",component:Ge}),Object(ge.jsx)(N.a,{exact:!0,path:"/logged-out",component:Ke}),Object(ge.jsx)(N.a,{exact:!0,path:"/challenges",component:lt}),Object(ge.jsx)(N.a,{exact:!0,path:"/games",component:ft}),Object(ge.jsx)(N.a,{path:"/login",component:function(){window.location="//".concat(j.serverUrl,"/auth/google")}}),Object(ge.jsx)(N.a,{path:"/logout",component:function(){window.location="//".concat(j.serverUrl,"/logout")}})]}),Object(ge.jsx)(nn,{}),Object(ge.jsx)(Ht,{})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!!e.player.id!==t.loggedIn?(t.loggedIn||an.find((function(t){return e.location.pathname.includes(t)}))||e.loggedIn(),e.player.id?{loggedIn:!t.loggedIn}:(e.loggedOut(),{loggedIn:!1})):Object.keys(e.player).length>0?{loggedIn:!0}:t}}]),n}(a.Component),cn=Object(c.c)((function(e){return{game:e.game,player:e.player,location:e.router.location}}),(function(e){return Object(l.bindActionCreators)({loggedOut:function(){return Object(V.d)("/logged-out")},loggedIn:function(){return Object(V.d)("/leaderboard")}},e)}))(rn),on=(n(152),document.querySelector("#root"));Object(i.render)(Object(ge.jsx)(c.a,{store:H,children:Object(ge.jsx)(o.a,{history:L,children:Object(ge.jsx)("div",{children:Object(ge.jsx)(cn,{})})})}),on)}},[[153,1,2]]]);
//# sourceMappingURL=main.5bfcdfda.chunk.js.map